<!doctype html>
<html lang="es">
<head>
  <!-- Codificación y viewport -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />

  <!-- Color de la barra del navegador (Android/desktop) -->
  <meta name="theme-color" content="#000000" />

  <!-- Manifest PWA -->
  <link rel="manifest" href="/manifest.webmanifest">

  <!-- Íconos del sitio / PWA -->
  <link rel="icon" href="images/logo-cuadrado-512.png" sizes="any">
  <link rel="apple-touch-icon" sizes="192x192" href="./images/logo-cuadrado-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="./images/logo-cuadrado-512.png">

  <!-- Metadatos sociales (Open Graph / WhatsApp / Twitter) -->
  <meta property="og:title" content="Nadie quiere pensar — Calculadora para ensayos, juntadas y canchitas">
  <meta property="og:description" content="Sacá la cuenta por persona en 3 minutos.">
  <meta property="og:image" content="https://nadiequierepensar.github.io/images/og-card.png">
  <meta property="og:url" content="https://nadiequierepensar.github.io/">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">

  <!-- Título y estilos (preload + hoja) -->
  <title>Nadie quiere pensar</title>
  <link rel="preload" href="css/app.css?v=4" as="style">
  <link rel="stylesheet" href="css/app.css?v=4">
</head>
<body>
  <main>
    <!-- Encabezado principal -->
    <div class="container">
      <h1>Nadie quiere pensar</h1>

      <!-- Lista de opciones del menú -->
      <section class="list">
        <!-- Fila 1: Ensayo -->
        <div class="row">
          <div class="row-title">En el ensayo</div>
          <a class="row-btn" aria-label="Calcular ensayo" href="ensayo/ensayo1.html">
            <img src="images/ensayo.png" alt="Ensayo">
          </a>
        </div>

        <!-- Fila 2: Juntada -->
        <div class="row">
          <div class="row-title">En la juntada</div>
          <a class="row-btn" aria-label="Calcular juntada" href="juntadas/juntadas1.html">
            <img src="images/juntada.png" alt="Juntada">
          </a>
        </div>

        <!-- Fila 3: Canchita -->
        <div class="row">
          <div class="row-title">En la canchita</div>
          <a class="row-btn" aria-label="Calcular canchita" href="canchita/canchita1.html">
            <img src="images/canchita.png" alt="Canchita">
          </a>
        </div>

    <!-- Botón inferior con easter egg -->
    <div class="footer">
      <button class="cta" onclick="alert('Como todas las buenas ideas, “Nadie quiere pensar” surge de la venganza, la venganza contra el constante encaje de cuentas/plata por parte de mis amigos: “¿Cuánto es mi parte?”, “¡Yo no tomé alcohol eh!”, “La otra vez yo puse de más y me quedaron debiendo”. Bueno, todo eso se acabó. Tomen, calcúlenlo ustedes ahora, les hice una aplicación para eso.')">CharlyCorp®</button>
    </div>
  </main>

  <!-- Scripts base (transiciones + SW) -->
  <script src="js/nav-transitions.js?v=1"></script>
  <script>
    // Registrar Service Worker (si el navegador lo soporta)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('/sw.js');
    }
  </script>

  <!-- Barra inferior “Instalar app” (oculta por defecto) -->
  <div id="install-wrap" style="position:fixed;left:0;right:0;bottom:84px;display:none;justify-content:center;z-index:9999">
    <button id="btn-install" class="cta">Instalar app</button>
  </div>

  <!-- Lógica de instalación (Android/iOS) -->
  <script>
    let deferredPrompt = null;

    // Android/Chrome: capturar evento y mostrar la barra
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      document.getElementById('install-wrap').style.display = 'flex';
    });

    // Click en “Instalar”
    document.getElementById('btn-install').addEventListener('click', async () => {
      if (!deferredPrompt) return;
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
      document.getElementById('install-wrap').style.display = 'none';
    });

    // iOS: no hay evento. Mostramos un tip para “Agregar a inicio”
    const isIOS = /iphone|ipad|ipod/i.test(navigator.userAgent);
    const isStandalone = window.matchMedia('(display-mode: standalone)').matches || navigator.standalone;
    if (isIOS && !isStandalone && !sessionStorage.getItem('a2hs_tip')) {
      const tip = document.createElement('div');
      tip.style.cssText = "position:fixed;left:8px;right:8px;bottom:84px;background:#141414;color:#fff;padding:12px 14px;border-radius:12px;text-align:center;opacity:.95;z-index:9999";
      tip.textContent = 'Para instalar: Compartir → “Agregar a pantalla de inicio”.';
      document.body.appendChild(tip);
      sessionStorage.setItem('a2hs_tip', '1');
      setTimeout(() => tip.remove(), 7000);
    }
  </script>
</body>
</html>
